<div ng-controller="templateImageVideoTextController as templateImageVideoText">
  <div ng-if="templateImageVideoText.alertContent" class="alert alert-{{templateImageVideoText.alertContent.type}} alert-dismissible alert-fixed" role="alert">
    <button type="button" class="close" ng-click="templateImageVideoText.alertContent = null" aria-label="Close"><span aria-hidden="true">&times;</span></button> {{templateImageVideoText.alertContent.message}}
  </div>
  <img ng-if="templateImageVideoText.image" src="{{templateImageVideoText.image}}">
  <form name="formEditor">
    <div class="row mtop20">
      <div class="col-sm-12">
        <div class="form-group">
          <label for="title" class="control-label">Título</label>
          <input type="text"
          name="title"
          class="form-control"
          placeholder="Título"
          ng-model="templateImageVideoText.content.title"
          no-validation-message="true"
          validator="required,maxlength=60">
        </div>
      </div>
    </div>

    <div class="row mtop10">
      <div class="col-sm-12">
        <div class="form-group">
          <a class="camera cursor" ngf-select="templateImageVideoText.openImage($file)" name="file" ngf-accept="'image/*'">
            <span class="ion-camera"></span>
            AGREGAR IMAGEN
          </a>
          <div class="content_upload" ng-show="templateImageVideoText.initialImage">
            <button type="button" class="close corner_close" ng-click="templateImageVideoText.initialImage = null"><span aria-hidden="true">×</span></button>
            <div class="cropArea">
              <canvas width="900p" height="480"
                image-cropper image="templateImageVideoText.initialImage"
                cropped-image="templateImageVideoText.imageCropped"
                crop-width="700" crop-height="400" keep-aspect="true"
                touch-radius="30" crop-area-bounds="bounds">
              </canvas>
            </div>
            <div class="row">
              <div class="col-sm-12">
                <button class="btn btn-primary" ng-click="templateImageVideoText.crop()">Guardar imagen</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-12">
        <div class="form-group">
          <label class="control-label" for="video">Añadir vídeo (sólo id):</label>
          <input type="text"
          name="video"
          placeholder="Video"
          class="form-control"
          ng-model="templateImageVideoText.content.template.video"
          no-validation-message="true"
          validator="required">
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-12">
        <div class="form-group">
          <label class="control-label" for="abstract">Añadir Resumen (Max 60 carácteres):</label>
          <textarea maxlength="60" class="form-control" ng-model="templateImageVideoText.content.abstract" name="abstract" no-validation-message="true" validator="required,maxlength=60"></textarea>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-12">
        <div class="form-group">
          <div text-angular ng-model="templateImageVideoText.htmlContent"
                validator="required" no-validation-message="true" required>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-12">
        <button class="btn btn-primary pull-right" type="submit" validation-submit="formEditor" ng-disabled="!templateImageVideoText.image && !templateImageVideoText.buttonDisabled" ng-click="templateImageVideoText.saveContent()">GUARDAR</button>
      </div>
    </div>

  </form>
</div>
